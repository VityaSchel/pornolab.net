# Как делать запросы в поисковой системе pornolab.net

Перед прочтением этой статьи ознакомьтесь с тем, как авторизовывать запросы к форуму: [docs/auth.md](./auth.md)

- [Как делать запросы в поисковой системе pornolab.net](#как-делать-запросы-в-поисковой-системе-pornolabnet)
  - [Запрос](#запрос)
    - [Сортировка](#сортировка)
    - [Период](#период)
  - [Результаты](#результаты)

## Запрос

Для запроса поисковой системы сделайте POST запрос к `https://pornolab.net/forum/tracker.php` с заголовком Cookie.

В теле запроса перечислите параметры в формате `application/x-www-form-urlencoded`

| Параметр | Описание                                                                        |
| -------- | ------------------------------------------------------------------------------- |
| `nm`     | Поисковый запрос (текст)                                                        |
| `o`      | [Сортировка результатов](#сортировка) (по какому параметру сортировать)         |
| `s`      | Порядок сортировки, возможные значения: `1` (по возрастанию), `2` (по убыванию) |
| `f[]`    | Массив ID категорий, в которых искать                                           |
| `tm`     | [Период](#период), за который искать                                            |
| `pn`     | Поиск по автору (текст)                                                         |
| `my`     | Показывать только — "Мои раздачи": `1` — отмечено                               |
| `dlw`    | Показывать только — "Будущие закачки": `1` — отмечено                           |
| `dlc`    | Показывать только — "Прошлые закачки": `1` — отмечено                           |
| `oop`    | Показывать только — "Только открытые раздачи": `1` — отмечено                   |
| `new`    | Показывать только — "Новые с посл. посещения": `1` — отмечено                   |
| `fn`     | Показывать только — "Все разделы кроме выбранных": `1` — отмечено               |
|          |                                                                                 |

Подробнее про поиск на сайте форума: [https://pornolab.net/forum/viewtopic.php?t=101236#0](https://pornolab.net/forum/viewtopic.php?t=101236#0)

### Сортировка

Возможные значения для параметра `o`:

| Значение | Описание                |
| -------- | ----------------------- |
| `1`      | Зарегистрирован         |
| `3`      | Лучшее совпадение       |
| `2`      | Название темы           |
| `4`      | Количество скачиваний   |
| `10`     | Количество сидов        |
| `11`     | Количество личей        |
| `7`      | Размер                  |
| `8`      | Посл. сообщение         |
| `15`     | Количество комментариев |

### Период

Возможные значения для параметра `tm`:

| Значение | Описание        |
| -------- | --------------- |
| `-1`     | всё время       |
| `1`      | сегодня         |
| `3`      | последние 3 дня |
| `7`      | посл. неделю    |
| `14`     | посл. 2 недели  |
| `32`     | последний месяц |

## Результаты

Результаты рендерятся сервером и отображаются в HTML-разметке в ответе на запрос. Таблицу можно найти по квери `#search-results > table#tor-tbl`.

Внутри этой таблицы каждый ряд в tbody — это результат.